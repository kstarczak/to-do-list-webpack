(()=>{"use strict";const e=function(){const e={};return{subscribe:function(t,s){e[t]||(e[t]=[]),e[t].push(s)},unsubscribe:function(t,s){e[t]&&(e[t]=e[t].filter((e=>e!==s)))},publish:function(t,s){e[t]&&e[t].forEach((e=>e(s)))}}}(),t={add:function(e){e.id=this.idCount,this.idCount++,this.list.push(e)},delete:function(e){this.list=this.list.filter((t=>t.id!==e))},select:function(e){this.list.forEach((function(t){t.id===e?t.selected=!0:t.selected=!1}))}},s=function(e){return Object.assign(Object.create(t),{name:e,type:"projectList",selected:!1,list:[],idCount:1})},r=function(e){const{name:s,color:r="PowderBlue"}=e;return Object.assign(Object.create(t),{name:s,type:"project",selected:!1,color:r,list:[],idCount:1})},c=function(e){const{name:s,description:r=null,due:c=null,proiority:i="normal"}=e,{select:n}={listObject:t};return{name:s,description:r,due:c,proiority:i,type:"task",selected:!1,select:n}},i=function(){const t=[],r=function(e){if(t.find((t=>t.name===e))){const t=prompt(`A user with the name "${e}" already exists! Please enter a new user name.`);r(t)}else{const r=s(e);t.push(r),c(r)}},c=function(s){t.includes(s)&&!s.selected&&(t.forEach((e=>e.selected=!1)),s.selected=!0,e.publish("userSelected",s),e.publish("projectListModified",s.list),console.log("userSelected published and projectListModifed published"))};return{addUser:r,switchUser:c,currentUser:function(){return t.find((e=>e.selected))}}}();e.subscribe("addUser",i.addUser),e.subscribe("selectUser",i.switchUser);const n=function(){const t=function(){return i.currentUser().list.find((e=>e.selected))};return{addProjectToCurrentUser:function(t){const s=i.currentUser(),c=r(t);s.add(c),s.select(c.id),e.publish("projectListModified",s.list)},delProjectFromCurrentUser:function(s){const r=i.currentUser();if(t().id===s){const t="Create a new project or select a curent project to add tasks.";e.publish("currentProjectDeleted",t)}r.delete(s),e.publish("projectListModified",r.list)},displayProjectTasks:function(s){i.currentUser().select(s);const r=t().list;e.publish("projectSelected",r)},addTaskToCurrentProject:function(s){const r=t(),i=c(s);r.add(i),r.select(i.id),e.publish("projectModified",r.list)},deleteTaskFromCurrentUser:function(s){const r=t();r.delete(s),e.publish("projectModifed",r.list)}}}();e.subscribe("selectProject",n.displayProjectTasks),e.subscribe("addProject",n.addProjectToCurrentUser),e.subscribe("deleteProject",n.delProjectFromCurrentUser),e.subscribe("addTask",n.addTaskToCurrentProject),e.subscribe("deleteTask",n.deleteTaskFromCurrentUser),i.addUser("Konrad")})();