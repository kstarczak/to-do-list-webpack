(()=>{"use strict";const e=function(){const e={};return{subscribe:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},unsubscribe:function(t,n){e[t]&&(e[t]=e[t].filter((e=>e!==n)))},publish:function(t,n){e[t]&&e[t].forEach((e=>e(n)))}}}(),t=function(e){for(;e.firstChild;)e.removeChild(e.lastChild)},n={add:function(e){e.id=this.idCount,this.idCount++,this.list.push(e)},delete:function(e){this.list=this.list.filter((t=>t.id!==e))},select:function(e){this.list.forEach((function(t){t.id===e?t.selected=!0:t.selected=!1}))}},c=function(e){return Object.assign(Object.create(n),{name:e,type:"projectList",selected:!1,list:[],idCount:1})},o=function(e){const{name:t,color:c="PowderBlue"}=e;return Object.assign(Object.create(n),{name:t,type:"project",selected:!1,completed:!1,color:c,list:[],idCount:1})},s=function(e){const{name:t,description:c=null,due:o=null,priority:s="normal"}=e,{select:a}={listObject:n};return{name:t,type:"task",selected:!1,completed:!1,description:c,due:o,priority:s,select:a}},a=function(){const t=[],n=function(e){if(t.find((t=>t.name===e))){const t=prompt(`A user with the name "${e}" already exists! Please enter a new user name.`);n(t)}else{const n=c(e);t.push(n),o(n),d.addProjectToCurrentUser({name:"Grocery List",color:"PowderBlue"}),d.addTaskToCurrentProject({name:"milk",description:null,due:null,proiority:"normal"}),d.addTaskToCurrentProject({name:"bread",description:"Gluten-free kind!",due:null,proiority:"normal"})}},o=function(n){t.includes(n)&&!n.selected&&(t.forEach((e=>e.selected=!1)),n.selected=!0,e.publish("userSelected",n))};return{addUser:n,switchUser:o,currentUser:function(){return t.find((e=>e.selected))}}}(),d=function(){const t=function(){return a.currentUser().list.find((e=>e.selected))};return{addProjectToCurrentUser:function(t){const n=a.currentUser(),c=o(t);n.add(c),n.select(c.id),e.publish("projectListModified",n.list)},delProjectFromCurrentUser:function(n){const c=a.currentUser();if(t()&&t().id===n){const t="Select a current project or create a new project to add tasks.";e.publish("currentProjectDeleted",t)}c.delete(n),e.publish("projectListModified",c.list)},displayProjectTasks:function(n){const c=a.currentUser();c.select(n);const o=t().list;e.publish("projectListModified",c.list),e.publish("projectSelected",o)},addTaskToCurrentProject:function(n){const c=t(),o=s(n);c.add(o),c.select(o.id),e.publish("projectModified",c.list)},deleteTaskFromCurrentUser:function(n){const c=t();c.delete(n),e.publish("projectModified",c.list)},displayTaskInfo:function(n){const c=t();c.select(n),e.publish("taskSelected",c.list)},toggleTaskComplete:function(e){const n=t().list.find((t=>t.id===parseInt(e)));console.log("taskToComplete"),n.completed?n.completed=!1:n.completed=!0},editTask:function(n){const{id:c,task:o}=n,s=t(),a=s.list.find((e=>e.id===c));a.name=o.name,a.description=o.description,a.due=o.due,a.priority=o.priority,e.publish("taskEdited",s.list)}}}(),r=()=>{const e=document.getElementById("content");let t,n;document.querySelector(".content-cover")?t=document.querySelector(".content-cover"):(t=document.createElement("div"),t.classList.add("content-cover"),e.appendChild(t)),t.classList.add("cover"),document.querySelector(".form-container")?n=document.querySelector(".form-container"):(n=document.createElement("div"),n.classList.add("form-container"),e.appendChild(n)),n.classList.add("open")},l=()=>{const e=document.querySelector(".content-cover"),n=document.querySelector(".form-container");t(n),n.classList.remove("open"),e.classList.remove("cover")},i=()=>{r();const t=document.querySelector(".form-container"),n=document.createElement("form");n.className="project-form",n.setAttribute("autocomplete","off");const c=document.createElement("div");c.textContent="Create New Project",c.className="header";const o=document.createElement("div"),s=document.createElement("label");s.for="name",s.textContent="Project Name:";const a=document.createElement("input");a.id="name",a.type="text",o.append(s,a);const d=document.createElement("div"),i=document.createElement("label");i.for="color1",i.textContent="Choose a color (optional)";const u=document.createElement("input");u.id="color",u.type="color",u.value="#f6b73c",u.addEventListener("change",(function(){i.style.backgroundColor=this.value})),d.append(i,u);const m=()=>{const t={name:document.getElementById("name").value,color:document.getElementById("color").value};l(),e.publish("addProject",t)},p=document.createElement("div");p.classList.add("button-group");const E=document.createElement("button");E.type="button",E.classList.add("button","cancel"),E.textContent="Cancel",E.addEventListener("click",l);const b=document.createElement("button");b.type="button",b.classList.add("button","submit"),b.textContent="Create",b.addEventListener("click",m),p.append(E,b),n.append(c,o,d,p),n.addEventListener("submit",(e=>{e.preventDefault(),m()})),t.append(n)},u=()=>{r();const t=document.querySelector(".form-container"),n=document.createElement("form");n.className="task-form",n.setAttribute("autocomplete","off");const c=document.createElement("div");c.textContent="Create New task",c.className="header";const o=document.createElement("div"),s=document.createElement("label");s.for="name",s.textContent="Task Name:";const a=document.createElement("input");a.id="name",a.type="text",o.append(s,a);const d=document.createElement("div"),i=document.createElement("label");i.for="description",i.textContent="Task Description:";const u=document.createElement("textarea");u.id="description",u.setAttribute("rows","4"),d.append(i,u);const m=document.createElement("div"),p=document.createElement("label");p.for="due",p.textContent="Task Due:";const E=document.createElement("input");E.id="due",E.type="date",m.append(p,E);const b=document.createElement("div"),f=document.createElement("label");f.for="priority",f.textContent="Task priority:";const k=document.createElement("select");k.id="priority";const v=document.createElement("option");v.textContent="low";const C=document.createElement("option");C.value="medium",C.textContent="medium (default)",C.setAttribute("selected",!0);const y=document.createElement("option");y.textContent="high",k.append(v,C,y),b.append(f,k);const h=()=>{const t={name:document.getElementById("name").value,description:document.getElementById("description").value,due:document.getElementById("due").value,priority:document.getElementById("priority").value};l(),e.publish("addTask",t)},L=document.createElement("div");L.classList.add("button-group");const x=document.createElement("button");x.type="button",x.classList.add("button","cancel"),x.textContent="Cancel",x.addEventListener("click",l);const j=document.createElement("button");j.type="button",j.classList.add("button","submit"),j.textContent="Create",j.addEventListener("click",h),L.append(x,j),n.append(c,o,d,m,b,L),n.addEventListener("submit",(e=>{e.preventDefault(),h()})),t.append(n)},m=t=>{const n=t.target,c=n.dataset.taskId,o=n.dataset.taskName,s=Array.from(n.parentElement.children),a=o.textContent,d=s.find((e=>"task-description"===e.className)).textContent,i=s.find((e=>"task-due"===e.className)).textContent,u=s.find((e=>"task-priority"===e.className)).textContent;r();const m=document.querySelector(".form-container"),p=document.createElement("form");p.className="task-form",p.setAttribute("autocomplete","off");const E=document.createElement("div");E.textContent="Create New task",E.className="header";const b=document.createElement("div"),f=document.createElement("label");f.for="name",f.textContent="Task Name:";const k=document.createElement("input");k.id="name",k.type="text",b.append(f,k),k.value=a;const v=document.createElement("div"),C=document.createElement("label");C.for="description",C.textContent="Task Description:";const y=document.createElement("textarea");y.id="description",y.setAttribute("rows","4"),v.append(C,y),y.value=d;const h=document.createElement("div"),L=document.createElement("label");L.for="due",L.textContent="Task Due:";const x=document.createElement("input");x.id="due",x.type="date",h.append(L,x),x.value=i;const j=document.createElement("div"),g=document.createElement("label");g.for="priority",g.textContent="Task priority:";const T=document.createElement("select");T.id="priority";const N=document.createElement("option");N.value="low",N.textContent="low";const I=document.createElement("option");I.value="medium",I.textContent="medium (default)";const S=document.createElement("option");S.value="high",S.textContent="high",T.append(N,I,S),j.append(g,T),T.value=u;const P=()=>{const t={name:document.getElementById("name").value,description:document.getElementById("description").value,due:document.getElementById("due").value,priority:document.getElementById("priority").value},n={id:parseInt(c),task:t};l(),console.log(n),e.publish("editTask",n)},w=document.createElement("div");w.classList.add("button-group");const U=document.createElement("button");U.type="button",U.classList.add("button","cancel"),U.textContent="Cancel",U.addEventListener("click",l);const q=document.createElement("button");q.type="button",q.classList.add("button","submit"),q.textContent="Create",q.addEventListener("click",P),w.append(U,q),p.append(E,b,v,h,j,w),p.addEventListener("submit",(e=>{e.preventDefault(),P()})),m.append(p)},p=function(n){const c=document.getElementById("content");t(c);const o=document.createElement("div");o.className="user-interface-wrapper";const s=document.createElement("div");s.className="user-interface";const a=document.createElement("div");a.classList.add("header-text"),a.textContent=`${n.name}'s To Do List`;const d=document.createElement("div");d.className="menu-wrapper";const r=document.createElement("button");r.className="menu-button",r.type="button";const l=document.createElement("span");l.textContent="Menu",d.append(r),r.append(l);const u=document.createElement("nav");u.classList.add("nav");const m=document.createElement("ul"),p=document.createElement("li"),E=document.createElement("a");E.textContent="Switch User",p.append(E);const b=document.createElement("li"),f=document.createElement("a");f.href="https://konradstar.dev/",f.textContent="About",b.append(f),m.append(p,b),u.append(m),r.addEventListener("click",(()=>{u.classList.toggle("open"),r.classList.toggle("open")}));const k=document.createElement("div");k.className="project-header-wrapper";const v=document.createElement("div");v.textContent="PROJECTS",v.className="project-header";const C=document.createElement("div");C.classList.add("add-project-button-wrapper");const y=document.createElement("button");y.type="button",y.className="add-project-button button";const h=document.createElement("div");h.className="add-icon";const L=document.createElement("span");L.textContent="Add Project",y.append(h,L),y.addEventListener("click",i),C.appendChild(y),k.append(v,C),s.append(a,d,u,k),o.appendChild(s),c.appendChild(o),e.publish("projectListModified",n.list)},E=function(n){const c=document.getElementById("content");let o;document.querySelector(".project-interface")?(o=document.querySelector(".project-interface"),t(o)):(o=document.createElement("div"),o.className="project-interface",c.append(o));const s=document.createElement("div");s.className="project-container";const a=document.createElement("ul");a.className="project-list",s.appendChild(a);const d=function(t){let n=t.target.dataset.projectId;n=parseInt(n),e.publish("selectProject",n)},r=function(t){let n=t.target.dataset.projectId;n=parseInt(n),e.publish("deleteProject",n)};!function(e){if(e.length<1){const e=document.createElement("li");e.className="empty-list",e.textContent='Select "Add Project" to get started.',a.appendChild(e)}else e.forEach((e=>{const t=document.createElement("li");t.classList.add("project-list-item"),t.style.backgroundColor=e.color;const n=document.createElement("a");n.textContent=e.name,n.classList.add("project-link"),n.dataset.projectId=e.id,e.selected&&(t.classList.add("selected"),n.classList.add("selected")),n.addEventListener("click",d);const c=document.createElement("button");c.type="button",c.dataset.projectId=e.id,c.id=e.type+e.id,c.className="add-task-button button",c.textContent="Add Task",c.addEventListener("click",u);const o=document.createElement("button");o.type="button",o.className="delete-project-button button",o.dataset.projectId=e.id,o.ariaLabel="delete project",o.addEventListener("click",r);const s=document.createElement("div");s.classList.add("project-list-item-summary"),s.append(n,c,o),t.append(s),a.appendChild(t)}))}(n),o.append(s)},b=function(n){const c=document.querySelector(".project-list-item.selected");let o;document.querySelector(".task-interface")?(o=document.querySelector(".task-interface"),t(o)):(o=document.createElement("div"),o.className="task-interface",c.appendChild(o));const s=document.createElement("div");s.className="task-header",s.textContent="Your tasks:";const a=document.createElement("div");a.className="task-container";const d=document.createElement("ul");d.className="task-list",a.appendChild(d);const r=function(t){let n=t.target.dataset.taskId;n=parseInt(n),e.publish("selectTask",n)},l=function(t){let n=t.target.dataset.taskId;n=parseInt(n),e.publish("deleteTask",n)};!function(t){if(t.length<1){const e=document.createElement("li");e.className="empty-list",e.textContent='Select "Add Task" to add items.',d.appendChild(e)}else t.forEach((t=>{const n=document.createElement("li");n.classList.add("task");const c=document.createElement("div");c.classList.add("task-summary");const o=document.createElement("div");o.classList.add("task-details");const s=document.createElement("div");s.classList.add("check");const a=document.createElement("label"),i=document.createElement("input");i.type="checkbox",i.dataset.taskId=t.id;const u=document.createElement("div");u.classList.add("alt-checkbox"),a.append(i,u),s.append(a);const p=document.createElement("a");p.classList.add("task-link"),p.dataset.taskId=t.id,p.textContent=t.name,p.addEventListener("click",r),t.selected&&(p.classList.add("selected"),n.classList.add("selected")),t.completed&&(p.classList.add("completed"),i.checked=!0),n.append(c,o);const E=document.createElement("button");E.type="button",E.className="delete-task-button",E.dataset.taskId=t.id,E.ariaLabel="delete task",E.addEventListener("click",l),c.append(s,p,E),i.addEventListener("change",(function(t){const n=t.target.dataset.taskId;t.target.checked?p.classList.add("completed"):p.classList.remove("completed"),e.publish("completeTask",n)}));const b=document.createElement("div");b.classList.add("task-description-title"),b.textContent="Description";const f=document.createElement("div");f.classList.add("task-description"),f.textContent=t.description;const k=document.createElement("div");k.classList.add("task-due-title"),k.textContent="Due date";const v=document.createElement("div");v.classList.add("task-due"),v.textContent=t.due;const C=document.createElement("div");C.classList.add("task-priority-title"),C.textContent="priority";const y=document.createElement("div");y.classList.add("task-priority"),y.textContent=t.priority;const h=document.createElement("button");h.type="button",h.className="edit-task-button",h.dataset.taskId=t.id,h.dataset.taskName=t.name,h.textContent="Edit",h.addEventListener("click",m),o.append(b,f,k,v,C,y,h),d.append(n)}))}(n),o.append(s,a)},f=function(e){const n=document.getElementById("content");let c;document.querySelector(".task-interface")?(c=document.querySelector(".task-interface"),t(c)):(c=document.createElement("div"),c.className="task-interface",n.appendChild(c));const o=document.createElement("div");o.className="unselected-message",o.textContent=e,c.appendChild(o)};e.subscribe("userSelected",p),e.subscribe("projectListModified",E),e.subscribe("projectModified",b),e.subscribe("taskSelected",b),e.subscribe("projectSelected",b),e.subscribe("currentProjectDeleted",f),e.subscribe("taskEdited",b),e.subscribe("addUser",a.addUser),e.subscribe("selectUser",a.switchUser),(()=>{r();const t=document.querySelector(".form-container"),n=document.createElement("form");n.className="user-form",n.setAttribute("autocomplete","off");const c=document.createElement("div");c.classname="user-header",c.textContent="Welcome to my TO-DO list!",c.className="welcome-header";const o=document.createElement("div");o.textContent="Enter your name below to get started.",o.className="user-sub-heading";const s=document.createElement("div"),a=document.createElement("label");a.for="name",a.textContent="Name:";const d=document.createElement("input");d.id="name",d.type="text",s.append(a,d);const i=()=>{const t=d.value;l(),e.publish("addUser",t)},u=document.createElement("div");u.classList.add("button-group");const m=document.createElement("a");m.classList.add("button","cancel"),m.textContent="Cancel",m.href="https://konradstar.dev/";const p=document.createElement("button");p.type="button",p.classList.add("button","submit"),p.textContent="Create",p.addEventListener("click",i),u.append(m,p),n.append(c,o,s,u),n.addEventListener("submit",(e=>{e.preventDefault(),i()})),t.append(n)})(),e.subscribe("selectProject",d.displayProjectTasks),e.subscribe("addProject",d.addProjectToCurrentUser),e.subscribe("deleteProject",d.delProjectFromCurrentUser),e.subscribe("addTask",d.addTaskToCurrentProject),e.subscribe("deleteTask",d.deleteTaskFromCurrentUser),e.subscribe("selectTask",d.displayTaskInfo),e.subscribe("completeTask",d.toggleTaskComplete),e.subscribe("editTask",d.editTask)})();