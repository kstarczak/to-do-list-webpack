(()=>{"use strict";const e=function(){const e={};return{subscribe:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},unsubscribe:function(t,n){e[t]&&(e[t]=e[t].filter((e=>e!==n)))},publish:function(t,n){e[t]&&e[t].forEach((e=>e(n)))}}}(),t=function(e){for(;e.firstChild;)e.removeChild(e.lastChild)},n={add:function(e){e.id=this.idCount,this.idCount++,this.list.push(e)},delete:function(e){this.list=this.list.filter((t=>t.id!==e))},select:function(e){this.list.forEach((function(t){t.id===e?t.selected=!0:t.selected=!1}))}},c=function(e){return Object.assign(Object.create(n),{name:e,type:"projectList",selected:!1,list:[],idCount:1})},o=function(e){const{name:t,color:c="PowderBlue"}=e;return Object.assign(Object.create(n),{name:t,type:"project",selected:!1,color:c,list:[],idCount:1})},s=function(e){const{name:t,description:c=null,due:o=null,priority:s="normal"}=e,{select:a}={listObject:n};return{name:t,type:"task",selected:!1,description:c,due:o,priority:s,select:a}},a=function(){const t=[],n=function(e){if(t.find((t=>t.name===e))){const t=prompt(`A user with the name "${e}" already exists! Please enter a new user name.`);n(t)}else{const n=c(e);t.push(n),o(n),d.addProjectToCurrentUser({name:"Grocery List",color:"PowderBlue"}),d.addTaskToCurrentProject({name:"milk",description:null,due:null,proiority:"normal"}),d.addTaskToCurrentProject({name:"bread",description:"Gluten-free kind!",due:null,proiority:"normal"})}},o=function(n){t.includes(n)&&!n.selected&&(t.forEach((e=>e.selected=!1)),n.selected=!0,e.publish("userSelected",n))};return{addUser:n,switchUser:o,currentUser:function(){return t.find((e=>e.selected))}}}(),d=function(){const t=function(){return a.currentUser().list.find((e=>e.selected))};return{addProjectToCurrentUser:function(t){const n=a.currentUser(),c=o(t);n.add(c),n.select(c.id),e.publish("projectListModified",n.list)},delProjectFromCurrentUser:function(n){const c=a.currentUser();if(t()&&t().id===n){const t="Select a current project or create a new project to add tasks.";e.publish("currentProjectDeleted",t)}c.delete(n),e.publish("projectListModified",c.list)},displayProjectTasks:function(n){const c=a.currentUser();c.select(n);const o=t().list;e.publish("projectListModified",c.list),e.publish("projectSelected",o)},addTaskToCurrentProject:function(n){const c=t(),o=s(n);c.add(o),c.select(o.id),e.publish("projectModified",c.list)},deleteTaskFromCurrentUser:function(n){const c=t();c.delete(n),e.publish("projectModified",c.list)},displayTaskInfo:function(n){const c=t();c.select(n),e.publish("taskSelected",c.list)},editTask:function(n){const{id:c,task:o}=n,s=t(),a=s.list.find((e=>e.id===c));a.name=o.name,a.description=o.description,a.due=o.due,a.priority=o.priority,e.publish("taskEdited",s.list)}}}(),r=()=>{const e=document.getElementById("content");let t,n;document.querySelector(".content-cover")?t=document.querySelector(".content-cover"):(t=document.createElement("div"),t.classList.add("content-cover"),e.appendChild(t)),t.classList.add("cover"),document.querySelector(".form-container")?n=document.querySelector(".form-container"):(n=document.createElement("div"),n.classList.add("form-container"),e.appendChild(n)),n.classList.add("open")},i=()=>{const e=document.querySelector(".content-cover"),n=document.querySelector(".form-container");t(n),n.classList.remove("open"),e.classList.remove("cover")},l=()=>{r();const t=document.querySelector(".form-container"),n=document.createElement("form");n.className="project-form",n.setAttribute("autocomplete","off");const c=document.createElement("div");c.textContent="Create New Project",c.className="header";const o=document.createElement("div"),s=document.createElement("label");s.for="name",s.textContent="Project Name:";const a=document.createElement("input");a.id="name",a.type="text",o.append(s,a);const d=document.createElement("div"),l=document.createElement("label");l.for="color1",l.textContent="Choose a color (optional)";const u=document.createElement("input");u.id="color",u.type="color",u.value="#f6b73c",u.addEventListener("change",(function(){l.style.backgroundColor=this.value})),d.append(l,u);const m=()=>{const t={name:document.getElementById("name").value,color:document.getElementById("color").value};i(),e.publish("addProject",t)},p=document.createElement("div");p.classList.add("button-group");const E=document.createElement("button");E.type="button",E.classList.add("button","cancel"),E.textContent="Cancel",E.addEventListener("click",i);const b=document.createElement("button");b.type="button",b.classList.add("button","submit"),b.textContent="Create",b.addEventListener("click",m),p.append(E,b),n.append(c,o,d,p),n.addEventListener("submit",(e=>{e.preventDefault(),m()})),t.append(n)},u=()=>{r();const t=document.querySelector(".form-container"),n=document.createElement("form");n.className="task-form",n.setAttribute("autocomplete","off");const c=document.createElement("div");c.textContent="Create New task",c.className="header";const o=document.createElement("div"),s=document.createElement("label");s.for="name",s.textContent="Task Name:";const a=document.createElement("input");a.id="name",a.type="text",o.append(s,a);const d=document.createElement("div"),l=document.createElement("label");l.for="description",l.textContent="Task Description:";const u=document.createElement("textarea");u.id="description",u.setAttribute("rows","4"),d.append(l,u);const m=document.createElement("div"),p=document.createElement("label");p.for="due",p.textContent="Task Due:";const E=document.createElement("input");E.id="due",E.type="date",m.append(p,E);const b=document.createElement("div"),f=document.createElement("label");f.for="priority",f.textContent="Task priority:";const v=document.createElement("select");v.id="priority";const C=document.createElement("option");C.textContent="low";const k=document.createElement("option");k.value="medium",k.textContent="medium (default)",k.setAttribute("selected",!0);const y=document.createElement("option");y.textContent="high",v.append(C,k,y),b.append(f,v);const h=()=>{const t={name:document.getElementById("name").value,description:document.getElementById("description").value,due:document.getElementById("due").value,priority:document.getElementById("priority").value};i(),e.publish("addTask",t)},L=document.createElement("div");L.classList.add("button-group");const x=document.createElement("button");x.type="button",x.classList.add("button","cancel"),x.textContent="Cancel",x.addEventListener("click",i);const j=document.createElement("button");j.type="button",j.classList.add("button","submit"),j.textContent="Create",j.addEventListener("click",h),L.append(x,j),n.append(c,o,d,m,b,L),n.addEventListener("submit",(e=>{e.preventDefault(),h()})),t.append(n)},m=t=>{const n=t.target,c=n.dataset.id,o=Array.from(n.parentElement.children),s=document.querySelector(`.task-link[data-id='${c}']`).textContent,a=o.find((e=>"task-description"===e.className)).textContent,d=o.find((e=>"task-due"===e.className)).textContent,l=o.find((e=>"task-priority"===e.className)).textContent;r();const u=document.querySelector(".form-container"),m=document.createElement("form");m.className="task-form",m.setAttribute("autocomplete","off");const p=document.createElement("div");p.textContent="Create New task",p.className="header";const E=document.createElement("div"),b=document.createElement("label");b.for="name",b.textContent="Task Name:";const f=document.createElement("input");f.id="name",f.type="text",E.append(b,f),f.value=s;const v=document.createElement("div"),C=document.createElement("label");C.for="description",C.textContent="Task Description:";const k=document.createElement("textarea");k.id="description",k.setAttribute("rows","4"),v.append(C,k),k.value=a;const y=document.createElement("div"),h=document.createElement("label");h.for="due",h.textContent="Task Due:";const L=document.createElement("input");L.id="due",L.type="date",y.append(h,L),L.value=d;const x=document.createElement("div"),j=document.createElement("label");j.for="priority",j.textContent="Task priority:";const g=document.createElement("select");g.id="priority";const N=document.createElement("option");N.value="low",N.textContent="low";const T=document.createElement("option");T.value="medium",T.textContent="medium (default)";const P=document.createElement("option");P.value="high",P.textContent="high",g.append(N,T,P),x.append(j,g),g.value=l;const S=()=>{const t={name:document.getElementById("name").value,description:document.getElementById("description").value,due:document.getElementById("due").value,priority:document.getElementById("priority").value},n={id:parseInt(c),task:t};i(),console.log(n),e.publish("editTask",n)},I=document.createElement("div");I.classList.add("button-group");const w=document.createElement("button");w.type="button",w.classList.add("button","cancel"),w.textContent="Cancel",w.addEventListener("click",i);const U=document.createElement("button");U.type="button",U.classList.add("button","submit"),U.textContent="Create",U.addEventListener("click",S),I.append(w,U),m.append(p,E,v,y,x,I),m.addEventListener("submit",(e=>{e.preventDefault(),S()})),u.append(m)},p=function(n){const c=document.getElementById("content");t(c);const o=document.createElement("div");o.className="user-interface";const s=document.createElement("div");s.classList.add("header-text"),s.textContent=`${n.name}'s To Do List`;const a=document.createElement("div");a.className="menu-wrapper";const d=document.createElement("button");d.className="menu-button",d.type="button";const r=document.createElement("span");r.textContent="Menu",a.append(d),d.append(r);const i=document.createElement("nav");i.classList.add("nav");const u=document.createElement("ul"),m=document.createElement("li"),p=document.createElement("a");p.textContent="Switch User",m.append(p);const E=document.createElement("li"),b=document.createElement("a");b.textContent="About",E.append(b),u.append(m,E),i.append(u),d.addEventListener("click",(()=>{i.classList.toggle("open"),d.classList.toggle("open")}));const f=document.createElement("button");f.type="button",f.className="add-project-button button";const v=document.createElement("div");v.className="add-icon";const C=document.createElement("span");C.textContent="Add New Project",f.append(v,C),f.addEventListener("click",l),o.append(s,a,i,f),c.append(o),e.publish("projectListModified",n.list)},E=function(n){const c=document.getElementById("content");let o;document.querySelector(".project-interface")?(o=document.querySelector(".project-interface"),t(o)):(o=document.createElement("div"),o.className="project-interface",c.append(o));const s=document.createElement("div");s.className="project-header",s.textContent="Your Projects:";const a=document.createElement("div");a.className="project-container";const d=document.createElement("ul");d.className="project-list",a.appendChild(d);const r=function(t){let n=t.target.parentElement.id;n=parseInt(n.replace("project","")),e.publish("selectProject",n)},i=function(t){let n=t.target.parentElement.id;n=parseInt(n.replace("project","")),e.publish("deleteProject",n)};!function(e){if(e.length<1){const e=document.createElement("li");e.className="empty-list",e.textContent='You do not have any Projects. Click the "Add Project" button to get started.',d.appendChild(e)}else e.forEach((e=>{const t=document.createElement("li");t.id=e.type+e.id,t.style.backgroundColor=e.color;const n=document.createElement("a");n.textContent=e.name,n.classList.add("project-link"),e.selected&&(t.classList.add("selected"),n.classList.add("selected")),n.addEventListener("click",r);const c=document.createElement("button");c.type="button",c.className="add-task-button button",c.textContent="Add Task",c.addEventListener("click",u);const o=document.createElement("button");o.type="button",o.className="delete-project-button button",o.ariaLabel="delete project",o.addEventListener("click",i),t.append(n,c,o),d.appendChild(t)}))}(n),o.append(s,a)},b=function(n){const c=document.getElementById("content");let o;document.querySelector(".task-interface")?(o=document.querySelector(".task-interface"),t(o)):(o=document.createElement("div"),o.className="task-interface",c.appendChild(o));const s=document.createElement("div");s.className="task-header",s.textContent="Your tasks:";const a=document.createElement("div");a.className="task-container";const d=document.createElement("ul");d.className="task-list",a.appendChild(d);const r=function(t){let n=t.target.dataset.id;n=parseInt(n),e.publish("selectTask",n)},i=function(t){let n=t.target.dataset.id;n=parseInt(n),e.publish("deleteTask",n)};!function(e){if(e.length<1){const e=document.createElement("li");e.className="empty-list",e.textContent='This project does not have any lists. Click the "Add Task" button to get started.',d.appendChild(e)}else e.forEach((e=>{const t=document.createElement("li");t.classList.add("task");const n=document.createElement("div");n.classList.add("task-summary");const c=document.createElement("div");c.classList.add("task-details");const o=document.createElement("a");o.classList.add("task-link"),o.dataset.id=e.id,o.textContent=e.name,o.addEventListener("click",r),o.addEventListener("click",(()=>c.classList.toggle("open"))),e.selected&&(o.classList.add("selected"),t.classList.add("selected")),t.append(n,c);const s=document.createElement("button");s.type="button",s.className="delete-task-button",s.dataset.id=e.id,s.ariaLabel="delete task",s.addEventListener("click",i),n.append(o,s);const a=document.createElement("div");a.classList.add("task-description-title"),a.textContent="Description";const l=document.createElement("div");l.classList.add("task-description"),l.textContent=e.description;const u=document.createElement("div");u.classList.add("task-due-title"),u.textContent="Due date";const p=document.createElement("div");p.classList.add("task-due"),p.textContent=e.due;const E=document.createElement("div");E.classList.add("task-priority-title"),E.textContent="priority";const b=document.createElement("div");b.classList.add("task-priority"),b.textContent=e.priority;const f=document.createElement("button");f.type="button",f.className="edit-task-button",f.dataset.id=e.id,f.textContent="edit Task",f.addEventListener("click",m),c.append(a,l,u,p,E,b,f),d.append(t)}))}(n),o.append(s,a)},f=function(e){const n=document.getElementById("content");let c;document.querySelector(".task-interface")?(c=document.querySelector(".task-interface"),t(c)):(c=document.createElement("div"),c.className="task-interface",n.appendChild(c));const o=document.createElement("div");o.className="unselected-message",o.textContent=e,c.appendChild(o)};e.subscribe("userSelected",p),e.subscribe("projectListModified",E),e.subscribe("projectModified",b),e.subscribe("taskSelected",b),e.subscribe("projectSelected",b),e.subscribe("currentProjectDeleted",f),e.subscribe("taskEdited",b),e.subscribe("addUser",a.addUser),e.subscribe("selectUser",a.switchUser),(()=>{r();const t=document.querySelector(".form-container"),n=document.createElement("form");n.className="user-form",n.setAttribute("autocomplete","off");const c=document.createElement("div");c.classname="user-header",c.textContent="Welcome to my TO-DO list!",c.className="welcome-header";const o=document.createElement("div");o.textContent="Enter your name below to get started.",o.className="user-sub-heading";const s=document.createElement("div"),a=document.createElement("label");a.for="name",a.textContent="Name:";const d=document.createElement("input");d.id="name",d.type="text",s.append(a,d);const l=()=>{const t=d.value;i(),e.publish("addUser",t)},u=document.createElement("div");u.classList.add("button-group");const m=document.createElement("button");m.type="button",m.classList.add("button","cancel"),m.textContent="Cancel",m.addEventListener("click",i);const p=document.createElement("button");p.type="button",p.classList.add("button","submit"),p.textContent="Create",p.addEventListener("click",l),u.append(m,p),n.append(c,o,s,u),n.addEventListener("submit",(e=>{e.preventDefault(),l()})),t.append(n)})(),e.subscribe("selectProject",d.displayProjectTasks),e.subscribe("addProject",d.addProjectToCurrentUser),e.subscribe("deleteProject",d.delProjectFromCurrentUser),e.subscribe("addTask",d.addTaskToCurrentProject),e.subscribe("deleteTask",d.deleteTaskFromCurrentUser),e.subscribe("selectTask",d.displayTaskInfo),e.subscribe("editTask",d.editTask)})();