(()=>{"use strict";const e=function(){const e={};return{subscribe:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},unsubscribe:function(t,n){e[t]&&(e[t]=e[t].filter((e=>e!==n)))},publish:function(t,n){e[t]&&e[t].forEach((e=>e(n)))}}}(),t=function(e){for(;e.firstChild;)e.removeChild(e.lastChild)},n={add:function(e){e.id=this.idCount,this.idCount++,this.list.push(e)},delete:function(e){this.list=this.list.filter((t=>t.id!==e))},select:function(e){this.list.forEach((function(t){t.id===e?t.selected=!0:t.selected=!1}))}},c=function(e){return Object.assign(Object.create(n),{name:e,type:"projectList",selected:!1,list:[],idCount:1})},o=function(e){const{name:t,color:c="#a7ffeb"}=e;return Object.assign(Object.create(n),{name:t,type:"project",selected:!1,completed:!1,color:c,list:[],idCount:1})},s=function(e){const{name:t,description:c=null,due:o=null,priority:s="normal"}=e,{select:a}={listObject:n};return{name:t,type:"task",selected:!1,completed:!1,description:c,due:o,priority:s,select:a}},a=function(){const t=[],n=function(e){if(t.find((t=>t.name===e))){const t=prompt(`A user with the name "${e}" already exists! Please enter a new user name.`);n(t)}else{const n=c(e);t.push(n),o(n),d.addProjectToCurrentUser({name:"Grocery List",color:"PowderBlue"}),d.addTaskToCurrentProject({name:"milk",description:null,due:null,proiority:"normal"}),d.addTaskToCurrentProject({name:"bread",description:"Gluten-free kind!",due:null,proiority:"normal"})}},o=function(n){t.includes(n)&&!n.selected&&(t.forEach((e=>e.selected=!1)),n.selected=!0,e.publish("userSelected",n))};return{addUser:n,switchUser:o,currentUser:function(){return t.find((e=>e.selected))}}}(),d=function(){const t=function(){return a.currentUser().list.find((e=>e.selected))};return{addProjectToCurrentUser:function(t){const n=a.currentUser(),c=o(t);n.add(c),n.select(c.id),e.publish("projectListModified",n.list)},delProjectFromCurrentUser:function(n){const c=a.currentUser();if(t()&&t().id===n){const t="Select a current project or create a new project to add tasks.";e.publish("currentProjectDeleted",t)}c.delete(n),e.publish("projectListModified",c.list)},displayProjectTasks:function(n){const c=a.currentUser();c.select(n);const o=t().list;e.publish("projectListModified",c.list),e.publish("projectSelected",o)},addTaskToCurrentProject:function(n){const c=t(),o=s(n);c.add(o),c.select(o.id),e.publish("projectModified",c.list)},deleteTaskFromCurrentUser:function(n){const c=t();c.delete(n),e.publish("projectModified",c.list)},displayTaskInfo:function(n){const c=t();c.select(n),e.publish("taskSelected",c.list)},toggleTaskComplete:function(e){const n=t().list.find((t=>t.id===parseInt(e)));console.log("taskToComplete"),n.completed?n.completed=!1:n.completed=!0},editTask:function(n){const{id:c,task:o}=n,s=t(),a=s.list.find((e=>e.id===c));a.name=o.name,a.description=o.description,a.due=o.due,a.priority=o.priority,e.publish("taskEdited",s.list)}}}(),r=()=>{const e=document.getElementById("content");let t,n;document.querySelector(".content-cover")?t=document.querySelector(".content-cover"):(t=document.createElement("div"),t.classList.add("content-cover"),e.appendChild(t)),t.classList.add("cover"),document.querySelector(".form-container")?n=document.querySelector(".form-container"):(n=document.createElement("div"),n.classList.add("form-container"),e.appendChild(n)),n.classList.add("open")},l=()=>{const e=document.querySelector(".content-cover"),n=document.querySelector(".form-container");t(n),n.classList.remove("open"),e.classList.remove("cover")},i=()=>{r();const t=document.querySelector(".form-container"),n=document.createElement("form");n.className="project-form",n.setAttribute("autocomplete","off");const c=document.createElement("div");c.textContent="Create New Project",c.className="header";const o=document.createElement("div"),s=document.createElement("label");s.for="name",s.textContent="Name:";const a=document.createElement("input");a.id="name",a.type="text",o.append(s,a);const d=document.createElement("div");d.className="color-header",d.textContent="Color:";const i=document.createElement("div");i.className="color-selector",["#f28b82","#fbbc04","#fff475","#ccff90","#a7ffeb","#aecbfa"].forEach(((e,t)=>{const n=document.createElement("label");n.className="color-control",n.for=e;const c=document.createElement("input");c.type="radio",c.name="color-input",c.id=e,c.style.backgroundColor=e,0===t&&(c.checked=!0),n.appendChild(c),i.appendChild(n)}));const u=()=>{const t={name:document.getElementById("name").value,color:document.querySelector('input[name="color-input"]:checked').id};l(),e.publish("addProject",t)},m=document.createElement("div");m.classList.add("button-group");const p=document.createElement("button");p.type="button",p.classList.add("button","cancel"),p.textContent="Cancel",p.addEventListener("click",l);const E=document.createElement("button");E.type="button",E.classList.add("button","submit"),E.textContent="Create",E.addEventListener("click",u),m.append(p,E),n.append(c,o,d,i,m),n.addEventListener("submit",(e=>{e.preventDefault(),u()})),t.append(n)},u=()=>{r();const t=document.querySelector(".form-container"),n=document.createElement("form");n.className="task-form",n.setAttribute("autocomplete","off");const c=document.createElement("div");c.textContent="Create New task",c.className="header";const o=document.createElement("div"),s=document.createElement("label");s.for="name",s.textContent="Task Name:";const a=document.createElement("input");a.id="name",a.type="text",o.append(s,a);const d=document.createElement("div"),i=document.createElement("label");i.for="description",i.textContent="Task Description:";const u=document.createElement("textarea");u.id="description",u.setAttribute("rows","4"),d.append(i,u);const m=document.createElement("div"),p=document.createElement("label");p.for="due",p.textContent="Task Due:";const E=document.createElement("input");E.id="due",E.type="date",m.append(p,E);const b=document.createElement("div"),f=document.createElement("label");f.for="priority",f.textContent="Task priority:";const k=document.createElement("select");k.id="priority";const v=document.createElement("option");v.textContent="low";const C=document.createElement("option");C.value="medium",C.textContent="medium (default)",C.setAttribute("selected",!0);const h=document.createElement("option");h.textContent="high",k.append(v,C,h),b.append(f,k);const y=()=>{const t={name:document.getElementById("name").value,description:document.getElementById("description").value,due:document.getElementById("due").value,priority:document.getElementById("priority").value};l(),e.publish("addTask",t)},L=document.createElement("div");L.classList.add("button-group");const j=document.createElement("button");j.type="button",j.classList.add("button","cancel"),j.textContent="Cancel",j.addEventListener("click",l);const x=document.createElement("button");x.type="button",x.classList.add("button","submit"),x.textContent="Create",x.addEventListener("click",y),L.append(j,x),n.append(c,o,d,m,b,L),n.addEventListener("submit",(e=>{e.preventDefault(),y()})),t.append(n)},m=t=>{const n=t.target,c=n.dataset.taskId,o=n.dataset.taskName,s=Array.from(n.parentElement.children),a=s.find((e=>"task-description"===e.className)).textContent,d=s.find((e=>"task-due"===e.className)).textContent,i=s.find((e=>"task-priority"===e.className)).textContent;r();const u=document.querySelector(".form-container"),m=document.createElement("form");m.className="task-form",m.setAttribute("autocomplete","off");const p=document.createElement("div");p.textContent="Create New task",p.className="header";const E=document.createElement("div"),b=document.createElement("label");b.for="name",b.textContent="Task Name:";const f=document.createElement("input");f.id="name",f.type="text",E.append(b,f),f.value=o;const k=document.createElement("div"),v=document.createElement("label");v.for="description",v.textContent="Task Description:";const C=document.createElement("textarea");C.id="description",C.setAttribute("rows","4"),k.append(v,C),C.value=a;const h=document.createElement("div"),y=document.createElement("label");y.for="due",y.textContent="Task Due:";const L=document.createElement("input");L.id="due",L.type="date",h.append(y,L),L.value=d;const j=document.createElement("div"),x=document.createElement("label");x.for="priority",x.textContent="Task priority:";const N=document.createElement("select");N.id="priority";const g=document.createElement("option");g.value="low",g.textContent="low";const T=document.createElement("option");T.value="medium",T.textContent="medium (default)";const I=document.createElement("option");I.value="high",I.textContent="high",N.append(g,T,I),j.append(x,N),N.value=i;const S=()=>{const t={name:document.getElementById("name").value,description:document.getElementById("description").value,due:document.getElementById("due").value,priority:document.getElementById("priority").value},n={id:parseInt(c),task:t};l(),e.publish("editTask",n)},P=document.createElement("div");P.classList.add("button-group");const w=document.createElement("button");w.type="button",w.classList.add("button","cancel"),w.textContent="Cancel",w.addEventListener("click",l);const U=document.createElement("button");U.type="button",U.classList.add("button","submit"),U.textContent="Create",U.addEventListener("click",S),P.append(w,U),m.append(p,E,k,h,j,P),m.addEventListener("submit",(e=>{e.preventDefault(),S()})),u.append(m)},p=function(n){const c=document.getElementById("content");t(c);const o=document.createElement("footer"),s=document.createElement("a");s.className="footer-link",s.href="https://konradstar.dev/",o.appendChild(s);const a=document.createElement("div");a.className="user-interface-wrapper";const d=document.createElement("div");d.className="user-interface";const r=document.createElement("div");r.classList.add("header-text"),r.textContent=`${n.name}'s To Do List`;const l=document.createElement("div");l.className="menu-wrapper";const u=document.createElement("button");u.className="menu-button",u.type="button",l.append(u);const m=document.createElement("nav");m.classList.add("nav");const p=document.createElement("ul"),E=document.createElement("li"),b=document.createElement("a");b.textContent="Switch User",E.className="switch-user-li",E.append(b);const f=document.createElement("li"),k=document.createElement("a");k.href="https://konradstar.dev/",k.textContent="About",f.append(k),p.append(E,f),m.append(p),u.addEventListener("click",(()=>{m.classList.toggle("open"),u.classList.toggle("open")}));const v=document.createElement("div");v.className="project-header-wrapper";const C=document.createElement("div");C.textContent="PROJECTS",C.className="project-header";const h=document.createElement("div");h.classList.add("add-project-button-wrapper");const y=document.createElement("button");y.type="button",y.className="add-project-button button";const L=document.createElement("div");L.className="add-icon";const j=document.createElement("span");j.textContent="Add Project",y.append(L,j),y.addEventListener("click",i),h.appendChild(y),v.append(C,h),d.append(r,l,m,v),a.appendChild(d),c.appendChild(a,o),e.publish("projectListModified",n.list)},E=function(n){const c=document.getElementById("content");let o;document.querySelector(".project-interface")?(o=document.querySelector(".project-interface"),t(o)):(o=document.createElement("div"),o.className="project-interface",c.append(o));const s=document.createElement("div");s.className="project-container";const a=document.createElement("ul");a.className="project-list",s.appendChild(a);const d=function(t){let n=t.target.dataset.projectId;n=parseInt(n),e.publish("selectProject",n)},r=function(t){let n=t.target.dataset.projectId;n=parseInt(n),e.publish("deleteProject",n)};!function(e){if(e.length<1){const e=document.createElement("li");e.className="empty-list",e.textContent='Select "Add Project" to get started.',a.appendChild(e)}else e.forEach((e=>{const t=document.createElement("li");t.classList.add("project-list-item"),t.style.backgroundColor=e.color;const n=document.createElement("a");n.textContent=e.name,n.classList.add("project-link"),n.dataset.projectId=e.id,e.selected&&(t.classList.add("selected"),n.classList.add("selected")),n.addEventListener("click",d);const c=document.createElement("button");c.type="button",c.dataset.projectId=e.id,c.id=e.type+e.id,c.className="add-task-button button",c.textContent="Add Task",c.addEventListener("click",u);const o=document.createElement("button");o.type="button",o.className="delete-project-button button",o.dataset.projectId=e.id,o.ariaLabel="delete project",o.addEventListener("click",r);const s=document.createElement("div");s.classList.add("project-list-item-summary"),s.append(n,c,o),t.append(s),a.appendChild(t)}))}(n),o.append(s)},b=function(n){const c=document.querySelector(".project-list-item.selected");let o;document.querySelector(".task-interface")?(o=document.querySelector(".task-interface"),t(o)):(o=document.createElement("div"),o.className="task-interface",c.appendChild(o));const s=document.createElement("div");s.className="task-header",s.textContent="Your tasks:";const a=document.createElement("div");a.className="task-container";const d=document.createElement("ul");d.className="task-list",a.appendChild(d);const r=function(t){let n=t.target.dataset.taskId;n=parseInt(n),e.publish("selectTask",n)},l=function(t){let n=t.target.dataset.taskId;n=parseInt(n),e.publish("deleteTask",n)};!function(t){if(t.length<1){const e=document.createElement("li");e.className="empty-list",e.textContent='Select "Add Task" to add items.',d.appendChild(e)}else t.forEach((t=>{const n=document.createElement("li");n.classList.add("task");const c=document.createElement("div");c.classList.add("task-summary");const o=document.createElement("div");o.classList.add("task-details");const s=document.createElement("div");s.classList.add("check");const a=document.createElement("label"),i=document.createElement("input");i.type="checkbox",i.dataset.taskId=t.id;const u=document.createElement("div");u.classList.add("alt-checkbox"),a.append(i,u),s.append(a);const p=document.createElement("a");p.classList.add("task-link"),p.dataset.taskId=t.id,p.textContent=t.name,p.addEventListener("click",r),t.selected&&(p.classList.add("selected"),n.classList.add("selected")),t.completed&&(p.classList.add("completed"),i.checked=!0),n.append(c,o);const E=document.createElement("button");E.type="button",E.className="delete-task-button",E.dataset.taskId=t.id,E.ariaLabel="delete task",E.addEventListener("click",l),c.append(s,p,E),i.addEventListener("change",(function(t){const n=t.target.dataset.taskId;t.target.checked?p.classList.add("completed"):p.classList.remove("completed"),e.publish("completeTask",n)}));const b=document.createElement("div");b.classList.add("task-description-title"),b.textContent="Description";const f=document.createElement("div");f.classList.add("task-description"),f.textContent=t.description;const k=document.createElement("div");k.classList.add("task-due-title"),k.textContent="Due date";const v=document.createElement("div");v.classList.add("task-due"),v.textContent=t.due;const C=document.createElement("div");C.classList.add("task-priority-title"),C.textContent="priority";const h=document.createElement("div");h.classList.add("task-priority"),h.textContent=t.priority;const y=document.createElement("button");y.type="button",y.className="edit-task-button",y.dataset.taskId=t.id,y.dataset.taskName=t.name,y.textContent="Edit",y.addEventListener("click",m),o.append(b,f,k,v,C,h,y),d.append(n)}))}(n),o.append(s,a)},f=function(e){const n=document.getElementById("content");let c;document.querySelector(".task-interface")?(c=document.querySelector(".task-interface"),t(c)):(c=document.createElement("div"),c.className="task-interface",n.appendChild(c));const o=document.createElement("div");o.className="unselected-message",o.textContent=e,c.appendChild(o)};e.subscribe("userSelected",p),e.subscribe("projectListModified",E),e.subscribe("projectModified",b),e.subscribe("taskSelected",b),e.subscribe("projectSelected",b),e.subscribe("currentProjectDeleted",f),e.subscribe("taskEdited",b),e.subscribe("addUser",a.addUser),e.subscribe("selectUser",a.switchUser),(()=>{r();const t=document.querySelector(".form-container"),n=document.createElement("form");n.className="user-form",n.setAttribute("autocomplete","off");const c=document.createElement("div");c.classname="user-header",c.textContent="Welcome to my TO-DO list!",c.className="welcome-header";const o=document.createElement("div");o.textContent="Enter your name below to get started.",o.className="user-sub-heading";const s=document.createElement("div"),a=document.createElement("label");a.for="name",a.textContent="Name:";const d=document.createElement("input");d.id="name",d.type="text",s.append(a,d);const i=()=>{const t=d.value;l(),e.publish("addUser",t)},u=document.createElement("div");u.classList.add("button-group");const m=document.createElement("a");m.classList.add("button","cancel"),m.textContent="Cancel",m.href="https://konradstar.dev/";const p=document.createElement("button");p.type="button",p.classList.add("button","submit"),p.textContent="Create",p.addEventListener("click",i),u.append(m,p),n.append(c,o,s,u),n.addEventListener("submit",(e=>{e.preventDefault(),i()})),t.append(n)})(),e.subscribe("selectProject",d.displayProjectTasks),e.subscribe("addProject",d.addProjectToCurrentUser),e.subscribe("deleteProject",d.delProjectFromCurrentUser),e.subscribe("addTask",d.addTaskToCurrentProject),e.subscribe("deleteTask",d.deleteTaskFromCurrentUser),e.subscribe("selectTask",d.displayTaskInfo),e.subscribe("completeTask",d.toggleTaskComplete),e.subscribe("editTask",d.editTask)})();